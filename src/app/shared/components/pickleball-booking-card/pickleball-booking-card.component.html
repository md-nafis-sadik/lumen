<!-- pickleball-booking-card.component.html -->
<div class="bg-white rounded-xl p-6 h-full">
  <p class="text-gray-700 text-[14px] mb-4">Sure, here you go. Book your Pickleball Court from below.</p>

  <div class="border border-gray-200 rounded-md" [ngClass]="{ 'fixed top-16 right-0 h-full bg-white z-50': isExpanded }">
    <div class="flex items-center justify-between py-2 px-4 border-b">
      <div class="text-lg font-semibold text-gray-800">Pickleball Court Booking</div>
      <div class="cursor-pointer" (click)="toggleExpand()">
        <img src="assets/icons/expand-icon.svg"/>
      </div>
    </div>

    <div class="mb-4 h-[286px] overflow-y-auto">
      <div class="flex flex-col sm:flex-row gap-6 p-4">
        <!-- Left Panel -->
        <div class="w-full sm:w-[176px] space-y-4 text-[12px]">
          <div (click)="useMyLocation()" 
               class="flex items-center gap-1 w-full px-3 py-2 border border-gray-200 rounded-lg hover:bg-[#E6F7FB] transition cursor-pointer">
            <img src="assets/icons/location-select-icon.svg"/>
            <div>Use my location</div>
          </div>

          <!-- Country -->
          <div class="px-3 py-2 rounded-lg cursor-pointer"
               [class.border-b-2]="countryControl.value"
               [class.ring-1]="countryControl.value"
               [class.border-mint-200]="countryControl.value"
               [class.ring-mint-200]="countryControl.value">
            <div class="text-sm mb-1">Country</div>
            <div class="truncate">{{ countryControl.value?.name || 'Select country' }}</div>
          </div>

          <!-- State -->
          <div class="px-3 py-2 border border-gray-200 rounded-lg"
               [class.cursor-not-allowed]="!countryControl.value"
               [class.bg-gray-100]="!countryControl.value">
            <div class="text-sm mb-1">State</div>
            <div class="truncate">{{ stateControl.value?.name || 'Select state' }}</div>
          </div>

          <!-- City -->
          <div class="px-3 py-2 border border-gray-200 rounded-lg"
               [class.cursor-not-allowed]="!stateControl.value"
               [class.bg-gray-100]="!stateControl.value">
            <div class="text-sm mb-1">City</div>
            <div class="truncate">{{ cityControl.value?.name || 'Select city' }}</div>
          </div>

          <!-- Date -->
          <div class="px-3 py-2 border border-gray-200 rounded-lg"
               [class.cursor-not-allowed]="!cityControl.value"
               [class.bg-gray-100]="!cityControl.value">
            <div class="text-sm mb-1">Date</div>
            <input *ngIf="cityControl.value" 
                   [matDatepicker]="picker" 
                   [formControl]="selectedDate"
                   class="w-full cursor-pointer">
            <div *ngIf="!cityControl.value" class="text-fade-text">Select date</div>
            <mat-datepicker #picker></mat-datepicker>
          </div>
        </div>

        <!-- Right Panel -->
        <div class="w-full sm:w-2/3 bg-gray-50 p-4">
    

          <div class="h-56 overflow-y-auto space-y-1 p-1 text-sm">
            <!-- Countries List -->
            <div *ngIf="currentStep === 'country'">
              <div *ngFor="let country of filteredCountries" 
       (click)="onCountrySelected(country)"
       class="flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer hover:bg-gray-100">
       <img 
  [src]="'https://flagcdn.com/48x36/' + getCountryCode(country) + '.png'"
  srcset="https://flagcdn.com/32x24/{{ getCountryCode(country) }}.png 2x,
          https://flagcdn.com/48x36/{{ getCountryCode(country) }}.png 3x"
  class="w-5 h-5 rounded-full"
  alt="{{ country.name }} flag">
    <span>{{ country.name }}</span>
  </div>
            </div>

            <!-- States List -->
            <div *ngIf="currentStep === 'state'">
              <div *ngFor="let state of filteredStates" 
                   (click)="onStateSelected(state)"
                   class="flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer hover:bg-gray-100">
                <span>{{ state.name }}</span>
              </div>
            </div>

            <!-- Cities List -->
            <div *ngIf="currentStep === 'city'">
              <div *ngFor="let city of filteredCities" 
                   (click)="onCitySelected(city)"
                   class="flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer hover:bg-gray-100">
                <span>{{ city.name }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="flex justify-between items-center px-4 py-3 border-t">
      <button class="px-4 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-100">Back</button>
      <button class="px-4 py-2 bg-gray-200 text-gray-500 rounded-lg text-sm cursor-not-allowed" disabled>Next</button>
    </div>
  </div>
</div>