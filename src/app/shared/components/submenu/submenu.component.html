<div class="flex flex-col justify-between h-full p-4 w-64">
  <div>
    <app-search-input
  [(model)]="searchQuery"
  (modelChange)="onSearchChange()"  
  placeholder="Quick search"
/>

<!-- Chat-specific layout -->
<ng-container *ngIf="isChatMenu">
  <!-- Favourites Section -->
  <div class="section mt-5">
    <div class="section-title mb-3 text-sm text-gray-400">FAVOURITES</div>
    <div class="max-h-[196px] overflow-y-auto p-1 space-y-3">
    <div *ngFor="let contact of favourites" class="contact-item flex items-center space-x-3 cursor-pointer">
      <img [src]="contact.imageURL || 'assets/images/default-avatar.jpg'" class="avatar w-7 h-7 rounded-full"/>
      <span class="text-sm">{{ contact.name }}</span>
      <div *ngIf="contact.badgeCount" class="badge bg-mint-200 px-1.5 py-1 rounded-md text-xs">{{ contact.badgeCount }}</div>
    </div>
    </div>
  </div>

  <!-- Direct Messages Section -->
  <div class="section mt-7">
    <div class="section-title mb-3 text-sm text-gray-400">DIRECT MESSAGES</div>
    <div class="max-h-[196px] overflow-y-auto p-1 space-y-3">
    <div *ngFor="let message of directMessages" class="contact-item flex items-center space-x-3 cursor-pointer">
      <img [src]="message.imageURL || 'assets/images/default-avatar.jpg'" class="avatar w-7 h-7 rounded-full"/>
      <span class="text-sm">{{ message.name }}</span>
      <div *ngIf="message.badgeCount" class="badge bg-mint-200 px-1.5 py-1 rounded-md text-xs">{{ message.badgeCount }}</div>
    </div>
  </div>
  </div>

  <!-- Channels Section -->
  <div class="section mt-5">
    <div class="flex items-center justify-between mb-3">
      <h2 class="font-medium">Chat Channels</h2>
      <div class="h-[36px] overflow-y-auto">
      <button
        (click)="openChannelModal()"
        class="bg-fade-white hover:bg-fade-white border border-fade-white p-1 rounded-full cursor-pointer"
      >
        <img src="assets/icons/add-icon.svg" class="w-[11px] object-contain" />
      </button>
      </div>

    </div>
    <div class=" h-[50px] overflow-y-auto p-1 space-y-3">
    <div *ngFor="let channel of channels" class="channel-item flex items-center space-x-3 cursor-pointer">
      <img [src]="channel.imageURL || 'assets/images/default-avatar.jpg'" class="avatar w-7 h-7 rounded-full"/>
      <span class="text-sm">{{ channel.name }}</span>
      <div *ngIf="channel.badgeCount" class="badge bg-mint-200 px-1.5 py-1 rounded-md text-xs">{{ channel.badgeCount }}</div>
    </div>
  </div>

  </div>
</ng-container>
<ng-container *ngIf="!isChatMenu">
    <div class="mb-3 mt-2 font-semibold">Action Menu</div>
    <div class="h-[196px] overflow-y-auto p-1 space-y-1">
      <div
        *ngFor="let item of filteredItems"
        (click)="selectSubmenu(item.key)"
        class="flex items-center gap-2 px-3 py-2  rounded-md w-52 cursor-pointer transition-all duration-200 ease-in-out"
        [ngClass]="{
          'bg-mint-50 ring-1 ring-mint-200 border-mint-200 border-b-2': item.key === activeSubmenu,
          'hover:bg-fade-white border-b-transparent': item.key !== activeSubmenu
        }"
      >
        <img [src]="item.icon" [alt]="item.label" class="w-5 h-5 object-contain" />
        <span class="text-sm text-black">{{ item.label }}</span>
      </div>
    </div>

    <div class="mt-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="font-medium">Chat Channels</h2>
        <div class="h-[36px] overflow-y-auto">
        <button
          (click)="openChannelModal()"
          class="bg-fade-white hover:bg-fade-white border border-fade-white p-1 rounded-full cursor-pointer"
        >
          <img src="assets/icons/add-icon.svg" class="w-[11px] object-contain" />
        </button>
        </div>

      </div>

      <ul class="space-y-2 h-[50px] overflow-y-auto">
        <li *ngFor="let channel of channels" class="channel-item flex items-center space-x-3 cursor-pointer">
          <img [src]="channel.imageURL || 'assets/images/default-avatar.jpg'" class="avatar w-7 h-7 rounded-full"/>
          <span class="text-sm">{{ channel.name }}</span>
          <div *ngIf="channel.badgeCount" class="badge bg-mint-200 px-1.5 py-1 rounded-md text-xs">{{ channel.badgeCount }}</div>
        </li>
      </ul>
    </div>

  </ng-container>
  </div>

  <div>
    <div
      class="max-w-[208px] max-h-[182px] mx-auto rounded-2xl border border-[#EDEDED] bg-[#f9f9f9] p-3 text-center"
    >
      <div class="flex justify-center mb-2">
        <div class="rounded-full bg-fade-white p-1.5">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5 text-cyan-500"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 3l2.09 6.26H21l-5.45 3.96 2.09 6.26L12 15.52l-5.64 3.96 2.09-6.26L3 9.26h6.91z"
            />
          </svg>
        </div>
      </div>
      <h2 class="font-semibold text-primary-text">
        Upgrade to
        <span
          class="bg-mint-50 text-mint-400 text-sm font-medium px-2 py-0.5 rounded-md ml-1 align-middle"
          >Pro</span
        >
      </h2>
      <p class="text-fade-text mt-2 text-xs">
        Dorem ipsum dolor sit amet, consectetur adipiscing elit.
      </p>

      <app-primary-button
        [text]="'Learn more'"
        [bgColor]="'#06ACCE'"
        [hoverColor]="'#0799B7'"
        fontSize="text-sm"
        padding="py-2 px-3"
        width="w-[108px]"
      ></app-primary-button>
    </div>
  </div>
</div>

