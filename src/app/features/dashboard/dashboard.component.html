<div class="flex flex-col h-screen overflow-hidden">
    <!-- Header -->
    <app-header
        (menuClicked)="toggleSidebar()"
        (gearClicked)="toggleSettings()"
        (bellClicked)="toggleNotifications()"
        (avatarClicked)="toggleAvatar()"
        ngClass="max-h-[70px]"
      />

  
    <div class="flex flex-1 overflow-hidden">
      <!-- Sidebar -->
      <app-sidebar
      [class.max-w-0]="!sidebarOpen"
      [class.max-w-[320px]]="sidebarOpen"
      class="w-full max-w-[320px] absolute lg:relative z-40 h-[calc(100vh-60px)] lg:h-auto bg-white-00-00 transition-all duration-700 overflow-hidden mt-[60px]"
    ></app-sidebar>

  
  
      <!-- Main content -->
      <main class="flex-1 overflow-auto bg-fade-white px-4 mt-[60px] pt-[20px]">
        
        <app-image-slider
        *ngIf="showSlider"
        [slides]="sliderSlides"
        [autoPlay]="true"  
        [interval]="5000"   
        ></app-image-slider>

        <div class="pb-[400px] space-y-4">
          <div
            *ngFor="let msg of messages"
            class="flex"
            [ngClass]="{
              'justify-end': msg.sender === 'user',
              'justify-start': msg.sender === 'bot'
            }"
          >
            <!-- Text message -->
            <div
              *ngIf="msg.type === 'text'"
              [ngClass]="{
                'bg-mint-200 rounded-tr-none text-primary-text': msg.sender === 'user',
                'bg-white-00 rounded-tl-none text-primary-text': msg.sender === 'bot'
              }"
              class="p-3 shadow max-w-[70%] white-00space-pre-wrap rounded-lg text-sm"
            >
              {{ msg.content }}
            </div>
        
            <!-- Booking message -->
            <ng-container *ngIf="msg.type === 'booking'">
              <app-pickleball-booking-card></app-pickleball-booking-card>
            </ng-container>
          </div>
        </div>
        
        
        
        

        <div class="flex flex-col items-center gap-4 sticky bottom-4 w-full bg-fade-white message transition-all duration-700">
          <!-- Input content remains the same -->
          <div *ngIf="showSlider">
            <h2 class="text-xl font-semibold text-center py-4">How can I assist you today?</h2>
          
            <div class="flex flex-wrap justify-center gap-3">
              <button 
                (click)="sendQuickMessage('Show my upcoming bookings')"
                class="flex items-center gap-2 px-4 py-2 bg-white-00 rounded-full shadow text-sm hover:bg-fade-white transition-colors duration-200">
                <img src="assets/icons/calender-icon.svg"/>
                Upcoming Bookings
              </button>
              
              <button 
                (click)="sendQuickMessage('Book a pickleball court')"
                class="flex items-center gap-2 px-4 py-2 bg-white-00 rounded-full shadow text-sm hover:bg-fade-white transition-colors duration-200">
                <img src="assets/icons/pickle-racket-icon.svg"/>
                Pickleball Court
              </button>
              
              <button 
                (click)="sendQuickMessage('Schedule doctor appointment')"
                class="flex items-center gap-2 px-4 py-2 bg-white-00 rounded-full shadow text-sm hover:bg-fade-white transition-colors duration-200">
                <img src="assets/icons/square-plus-icon.svg"/>
                Doctor Appointment
              </button>
              
              <button 
                (click)="sendQuickMessage('Show payment history')"
                class="flex items-center gap-2 px-4 py-2 bg-white-00 rounded-full shadow text-sm hover:bg-fade-white transition-colors duration-200">
                <img src="assets/icons/payment-history-icon.svg"/>
                Payment History
              </button>
            </div>
          </div>
          <div class="w-full max-w-[750px] mt-4 flex items-center border border-fade-white rounded-xl bg-white-00 px-4 py-2 shadow transition-colors duration-200">
            <input
              type="text"
              [(ngModel)]="userInput"
              placeholder="Type here..."
              class="flex-1 outline-none text-sm px-2 placeholder-custom"
              (keydown.enter)="sendMessage()"  
            />
            <div class="flex items-center gap-3 text-fade-text cursor-pointer">
              <img src="assets/icons/plus-chat-icon.svg"/>
              <img src="assets/icons/mike-icon.svg"/>
              <img src="assets/icons/echo-icon.svg"/>
            </div>
            <button
              (click)="sendMessage()"
              class="ml-2 text-white-00 bg-fade-white rounded-xl p-2 hover:bg-black transition-colors duration-500 cursor-pointer"
            >
              <img src="assets/icons/send-icon.svg" />
            </button>
          </div>
          
        </div>
        


      </main>

      <!-- Settings Sidebar -->
      <div
        *ngIf="showSettingsSidebar"
        appClickOutside
  (appClickOutside)="showSettingsSidebar = false"
        class=" dropdown-panel inset-y-0 right-0 w-80 bg-white-00 shadow-lg z-50 dropdown-panel transition-transform duration-500 ease-out transform translate-x-0"
      >
        <div class="p-4 flex justify-between items-center">
          <h3 class="text-lg font-semibold">Settings</h3>
          <button class="text-fade-text hover:text-primary-text" (click)="closeAll()">&times;</button>
        </div>
      </div>


      <div
      
        *ngIf="showAvatarDropdown"
        appClickOutside
        (appClickOutside)="showAvatarDropdown = false"
        class="fixed z-50 top-10 right-2 mt-2 w-48 bg-white-00 rounded-md shadow-lg border border-fade-white dropdown-panel transition-all duration-300 ease-out opacity-100"
      >
        <a href="#" class="block px-4 py-2 text-sm text-primary-text hover:bg-fade-white">Profile</a>
        <a href="#" class="block px-4 py-2 text-sm text-primary-text hover:bg-fade-white">Settings</a>
        <a href="/login" class="block px-4 py-2 text-sm text-primary-text hover:bg-fade-white">Logout</a>
      </div>

      
    
    
    <!-- Notifications Sidebar -->
    <div
      *ngIf="showNotificationsSidebar"
      appClickOutside
  (appClickOutside)="showNotificationsSidebar = false"
      class="inset-y-0 right-0 w-80 bg-white-00 shadow-lg z-50 dropdown-panel transition-transform duration-300 ease-out transform translate-x-0"
    >
      <div class="p-4 flex justify-between items-center">
        <h3 class="text-lg font-semibold">Notifications</h3>
        <button class="text-fade-text hover:text-primary-text" (click)="closeAll()">&times;</button>
      </div>
    </div>

    </div>
  </div>
  

  <div
  *ngIf="showAddChannelModal"
  class="fixed inset-0 z-50 bg-black/60 flex items-center justify-center"
  (click)="closeModal()"
>
  <!-- Modal Box -->
  <div
    class="bg-white w-full max-h-[90vh] mx-4 md:w-[500px] md:h-auto p-6 rounded-lg shadow-lg overflow-y-auto relative
           animate-[fadeInModal_0.3s_ease-out_forwards]"
    (click)="$event.stopPropagation()"
  >
    <button
      class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-xl cursor-pointer"
      (click)="closeModal()"
    >
      &times;
    </button>

    <h2 class="text-lg font-semibold mb-4">Add Chat Channel</h2>

    <input
      type="text"
      [(ngModel)]="newChannelName"
      placeholder="Channel name"
      class="w-full p-2 border border-gray-300 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500"
    />

    <app-primary-button
      [text]="'Add Channel'"
      (click)="saveChannel()"
      [bgColor]="'#06ACCE'"
      [hoverColor]="'#0799B7'"
      fontSize="text-sm"
      padding="py-2 px-3"
      width="w-full"
    ></app-primary-button>
  </div>
</div>



